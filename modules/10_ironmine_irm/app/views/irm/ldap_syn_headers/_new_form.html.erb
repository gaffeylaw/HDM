<%= form_for(@ldap_syn_header,:url=>{:action=>"create"},:builder => CustomFormBuilder) do |f| %>
  <%= f.hidden_field(:status_code) %>
  <% content_for :form_block_common   do%>
    <table class="form-table">
      <tbody>
          <tr>
            <td class="label-col"><label><%=t(:label_irm_ldap_syn_header_syn_name)%></label></td>
            <td class="data-col"><%=f.text_field :name,:required=>true%></td></td>
            <td class="label-col empty">&nbsp;</td>
            <td class="data-col empty">&nbsp;</td>
          </tr>
          <tr>
            <td class="label-col"><label><%=(t :ldap_auth_header_ldap_source)%></label></td>
            <td class="data-col"><%=f.blank_select(:ldap_source_id,available_ldap_sources,
                                              {},:required=>true,:id=>"ldap_source_id")%></td>
            <td class="label-col empty">&nbsp;</td>
            <td class="data-col empty">&nbsp;</td>
          </tr>
          <tr>
            <td class="label-col"><label><%=t(:label_irm_ldap_syn_header_base_dn)%></label></td>
            <td class="data-col"><%=f.text_field :base_dn  , :size=>60,:required=>true%></td>
            <td class="label-col empty">&nbsp;</td>
            <td class="data-col empty">&nbsp;</td>
          </tr>
          <tr>
            <td class="label-col"><label><%=t(:label_irm_ldap_syn_header_peo_syn_flag)%></label></td>
            <td class="data-col"><%=f.check_box :peo_syn_flag  %></td>
            <td class="label-col empty">&nbsp;</td>
            <td class="data-col empty">&nbsp;</td>
          </tr>
          <tr>
            <td class="label-col"><label><%=t(:label_irm_ldap_syn_header_ldap_auth_header)%></label></td>
            <td class="data-col"><%= f.blank_select(:ldap_auth_header_id,available_ldap_auth_headers(@ldap_syn_header.ldap_source_id),{},{
                                 :id=>"syn_people_id",
                                 :href=>url_for(:controller=>"irm/ldap_auth_headers",:action=>"get_by_ldap_source",:format=>"json",:belonged_ldap_source_id=>"${ldap_source_id}"),
                                 :depend=>"ldap_source_id"
                                 }) %></td>
            <td class="label-col empty">&nbsp;</td>
            <td class="data-col empty">&nbsp;</td>
          </tr>
        </tbody>
    </table>
  <% end %>

  <% content_for :form_block_company   do%>
    <table class="form-table">
      <tbody>
        <tr>
          <td class="label-col"><label><%=t(:label_irm_ldap_syn_header_comp_syn_flag)%></label></td>
          <td class="data-col"><%=f.check_box :comp_syn_flag  , :required=>true%></td>
          <td class="label-col empty">&nbsp;</td>
          <td class="data-col empty">&nbsp;</td>

        </tr>
        <tr>

          <td class="label-col"><label><%=t(:label_irm_ldap_syn_header_comp_level)%></label></td>
          <td class="data-col"><%=f.text_field :comp_level  , :required=>true%></td>
          <td class="label-col empty">&nbsp;</td>
          <td class="data-col empty">&nbsp;</td>
        </tr>
        <tr>
           <td class="label-col"><label><%=t(:label_irm_ldap_syn_header_comp_filter)%></label></td>
          <td class="data-col"><%=f.text_area :comp_filter, :rows=>4%></td>
          <td class="label-col"><label><%=t(:label_irm_ldap_syn_header_comp_desc)%></label></td>
          <td class="data-col"><%=f.text_area :comp_desc, :rows=>4%></td>
        </tr>
      </tbody>
    </table>
  <% end %>

  <% content_for :form_block_organization do %>
    <table class="form-table">
      <tbody>
        <tr>
          <td class="label-col"><label><%=t(:label_irm_ldap_syn_header_org_syn_flag)%></label></td>
          <td class="data-col"><%=f.check_box :org_syn_flag  , :required=>true%></td>
          <td class="label-col empty">&nbsp;</td>
          <td class="data-col empty">&nbsp;</td>
        </tr>
         <tr>
          <td class="label-col"><label><%=t(:label_irm_ldap_syn_header_org_level)%></label></td>
          <td class="data-col"><%=f.text_field :org_level  , :required=>true%></td>
          <td class="label-col empty">&nbsp;</td>
          <td class="data-col empty">&nbsp;</td>
        </tr>
        <tr>
           <td class="label-col"><label><%=t(:label_irm_ldap_syn_header_org_filter)%></label></td>
          <td class="data-col"><%=f.text_area :org_filter, :rows=>4%></td>
          <td class="label-col"><label><%=t(:label_irm_ldap_syn_header_org_desc)%></label></td>
          <td class="data-col"><%=f.text_area :org_desc, :rows=>4%></td>
        </tr>
      </tbody>
    </table>
  <% end %>

  <% content_for :form_block_dept do %>
    <table class="form-table">
      <tbody>
        <tr>
          <td class="label-col"><label><%=t(:label_irm_ldap_syn_header_dept_syn_flag)%></label></td>
          <td class="data-col"><%=f.check_box :dept_syn_flag  , :required=>true%></td>
          <td class="label-col empty">&nbsp;</td>
          <td class="data-col empty">&nbsp;</td>
        </tr>
        <tr>
          <td class="label-col"><label><%=t(:label_irm_ldap_syn_header_dept_level)%></label></td>
          <td class="data-col"><%=f.text_field :dept_level  , :required=>true%></td>
          <td class="label-col empty">&nbsp;</td>
          <td class="data-col empty">&nbsp;</td>
        </tr>
        <tr>
           <td class="label-col"><label><%=t(:label_irm_ldap_syn_header_dept_filter)%></label></td>
          <td class="data-col"><%=f.text_area :dept_filter, :rows=>4%></td>
          <td class="label-col"><label><%=t(:label_irm_ldap_syn_header_dept_desc)%></label></td>
          <td class="data-col"><%=f.text_area :dept_desc, :rows=>4%></td>
        </tr>
      </tbody>
    </table>
  <% end %>
  <% content_for :form_buttons  do %>
    <%= link_submit t(:save),{:class=>"btn btn-primary"}%>
    <%= link_back t(:cancel), {}, {:class => "btn cancel"}%>
  <% end %>

  <!--页面结构-->
  <div class="page-block">
    <table class="page-block-header">
      <tr>
        <td class="page-block-title">
          <h2 class="block-title"><%=t(:label_irm_ldap_syn_header_new)%></h2>
        </td>
        <td class="page-block-button">
          <%= content_for :form_buttons   %>
        </td>
      </tr>
    </table>
    <div class="page-block-body">
      <div class="sub-page-block">
        <!-- 一般信息 -->
        <div class="sub-page-block-header">
          <%= form_require_info %>
          <h3 class="sub-page-block-title"><%= t(:label_common_info) %></h3>
        </div>
        <div class="sub-page-block-body">
          <%= content_for :form_block_common   %>
        </div>
        <!-- 公司同步信息 -->
        <div class="sub-page-block-header">
          <%= form_require_info %>
          <h3 class="sub-page-block-title"><%= t(:label_irm_ldap_syn_header_comp_title) %></h3>
        </div>
        <div class="sub-page-block-body">
          <%= content_for :form_block_company   %>
        </div>
        <!-- 组织同步信息 -->
        <div class="sub-page-block-header">
          <%= form_require_info %>
          <h3 class="sub-page-block-title"><%= t(:label_irm_ldap_syn_header_org_title) %></h3>
        </div>
        <div class="sub-page-block-body">
          <%= content_for :form_block_organization   %>
        </div>
        <!-- 部门同步信息 -->
        <div class="sub-page-block-header">
          <%= form_require_info %>
          <h3 class="sub-page-block-title"><%= t(:label_irm_ldap_syn_header_dept_title) %></h3>
        </div>
        <div class="sub-page-block-body">
          <%= content_for :form_block_dept   %>
        </div>
      </div>
    </div>
    <table class="page-block-footer">
      <tr>
        <td class="page-block-title"></td>
        <td class="page-block-button">
          <%= content_for :form_buttons   %>
        </td>
      </tr>
    </table>
  </div>
<% end %>
<script type="text/javascript">
    $(function(){
        if($("#ldap_source_id")){
            $("#ldap_source_id").cascade("#syn_people_id");
        }
    });
</script>